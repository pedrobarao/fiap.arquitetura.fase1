<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\dev\fiap-net\fiap.arquitetura.fase1\src\Fase1.Contatos.Domain\ValueObjects\Email.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Text.RegularExpressions;
using Fase1.Commons.Domain.Communication;

namespace Fase1.Contatos.Domain.ValueObjects;

public record Email
{
    public const int MaxLength = 254;

    public Email()
    {
    }

    public Email(string endereco)
    {
        Endereco = endereco;
    }

    public string? Endereco { get; private set; }

    public override string ToString()
    {
        return Endereco;
    }

    public ValidationResult Validar()
    {
        var result = new ValidationResult();

        if (!ValidarFormatacao(Endereco)) result.Errors.Add(&quot;E-mail inv&#225;lido.&quot;);

        return result;
    }

    public static bool ValidarFormatacao(string? email)
    {
        if (string.IsNullOrWhiteSpace(email)) return true;

        var emailRegex = new Regex(@&quot;^[^@\s]+@[^@\s]+\.[^@\s]+$&quot;);
        if (!emailRegex.IsMatch(email)) return false;

        return true;
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[10,5,10,19,0],[11,5,11,6,0],[12,5,12,6,0],[14,5,14,34,1],[15,5,15,6,1],[16,9,16,29,1],[17,5,17,6,1],[19,31,19,35,1],[19,36,19,48,1],[22,5,22,6,0],[23,9,23,25,0],[24,5,24,6,0],[27,5,27,6,1],[28,9,28,45,1],[30,9,30,42,1],[30,43,30,81,1],[32,9,32,23,1],[33,5,33,6,1],[36,5,36,6,1],[37,9,37,46,1],[37,47,37,59,1],[39,9,39,67,1],[40,9,40,40,1],[40,41,40,54,1],[42,9,42,21,1],[43,5,43,6,1]]);
    </script>
  </body>
</html>